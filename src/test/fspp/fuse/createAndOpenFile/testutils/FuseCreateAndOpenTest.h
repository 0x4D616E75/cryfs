#pragma once
#ifndef TEST_FSPP_FUSE_OPENFILE_TESTUTILS_FUSECREATEANDOPENTEST_H_
#define TEST_FSPP_FUSE_OPENFILE_TESTUTILS_FUSECREATEANDOPENTEST_H_

#include "test/testutils/FuseTest.h"

class FuseCreateAndOpenTest: public FuseTest {
public:
  const char *FILENAME = "/myfile";

  int CreateAndOpenFile(const char *FILENAME, int flags);
  int CreateAndOpenFileAllowError(const char *FILENAME, int flags);
  void ReturnIsFileOnFstat(int descriptor);
};

MATCHER_P(OpenFlagsEq, expectedFlags, "") {
  printf("%d vs %d\n", expectedFlags, O_ACCMODE & arg);
  return expectedFlags == (O_ACCMODE & arg);
}

#endif
