#include "FuseOpenTest.h"

int FuseOpenTest::OpenFile(const char *filename, int flags) {
  int fd = OpenFileAllowError(filename, flags);
  EXPECT_GE(fd, 0);
  return fd;
}

int FuseOpenTest::OpenFileAllowError(const char *filename, int flags) {
  auto fs = TestFS();

  auto realpath = fs->mountDir() / filename;
  return ::open(realpath.c_str(), flags);
}
