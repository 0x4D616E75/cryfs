language: cpp
sudo: required
dist: trusty
compiler:
- gcc
- clang
os:
- linux
- osx
matrix:
  allow_failures:
    - os: osx
    - compiler: clang
addons:
  apt:
    packages:
    - libcrypto++-dev
    - libfuse-dev
install:
- wget -O boost.tar.bz2 https://sourceforge.net/projects/boost/files/boost/1.56.0/boost_1_56_0.tar.bz2/download
- tar -xf boost.tar.bz2
- cd boost_1_56_0
# TODO We should use clang as toolchain for building boost when clang is used for building our code
- ./bootstrap.sh --with-libraries=filesystem,thread,chrono
- sudo ./b2 -d0 install
- cd ..
- sudo rm -rf boost.tar.bz2 boost_1_56_0
- wget https://raw.githubusercontent.com/smessmer/travis-utils/master/run_with_fuse.sh
- chmod +x run_with_fuse.sh
script:
- mkdir cmake
- cd cmake
- cmake ..
- make -j2
- ./test/cpp-utils-test
- ../run_with_fuse.sh ./test/fspp-test
- ./test/parallelaccessstore-test
after_script:
- rm run_with_fuse.sh
